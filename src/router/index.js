import { createRouter, createWebHistory } from "vue-router";
import PresentationView from "../views/Presentation/PresentationView.vue";
import AboutView from "../views/LandingPages/AboutUs/AboutView.vue";
import ContactView from "../views/LandingPages/ContactUs/ContactView.vue";
import AuthorView from "../views/LandingPages/Author/AuthorView.vue";
import SignInBasicView from "../views/LandingPages/SignIn/BasicView.vue";
import PageHeaders from "../layouts/sections/page-sections/page-headers/HeadersView.vue";
import PageFeatures from "../layouts/sections/page-sections/features/FeaturesView.vue";
import NavigationNavbars from "../layouts/sections/navigation/navbars/NavbarsView.vue";
import NavigationNavTabs from "../layouts/sections/navigation/nav-tabs/NavTabsView.vue";
import NavigationPagination from "../layouts/sections/navigation/pagination/PaginationView.vue";
import InputAreasInputs from "../layouts/sections/input-areas/inputs/InputsView.vue";
import InputAreasForms from "../layouts/sections/input-areas/forms/FormsView.vue";
import ACAlerts from "../layouts/sections/attention-catchers/alerts/AlertsView.vue";
import ACModals from "../layouts/sections/attention-catchers/modals/ModalsView.vue";
import ACTooltipsPopovers from "../layouts/sections/attention-catchers/tooltips-popovers/TooltipsPopoversView.vue";
import ElAvatars from "../layouts/sections/elements/avatars/AvatarsView.vue";
import ElBadges from "../layouts/sections/elements/badges/BadgesView.vue";
import ElBreadcrumbs from "../layouts/sections/elements/breadcrumbs/BreadcrumbsView.vue";
import ElButtons from "../layouts/sections/elements/buttons/ButtonsView.vue";
import ElButtonGroups from "../layouts/sections/elements/button-groups/ButtonGroupsView.vue";
import ElDropdowns from "../layouts/sections/elements/dropdowns/DropdownsView.vue";
import ElProgressBars from "../layouts/sections/elements/progress-bars/ProgressBarsView.vue";
import ElToggles from "../layouts/sections/elements/toggles/TogglesView.vue";
import ElTypography from "../layouts/sections/elements/typography/TypographyView.vue";

 import AdminLoginView from "../views/Auth/AdminLogin.vue";
 import UserLoginView from "../views/Auth/UserLogin.vue";
 import AdminDashboardView from "../views/Admin/dashboard.vue";
 import AdminSettingsView from "../views/Admin/Settings.vue"
 import AdminUsersView from "../views/Admin/Users.vue"

// import AdminView from "../views/LandingPages/Author/AuthorView.vue";
import { Role } from './constants';
import { useStore } from '@/stores'



const router = createRouter({
  history: createWebHistory(import.meta.env.BASE_URL),
  routes: [
    {
      path: "/",
      name: "presentation",
      component: PresentationView,
      //meta: { requiresAuth: true, requiredRole: Role.Admin }, 
    },
    {
      path: "/pages/landing-pages/about-us",
      name: "about",
      component: AboutView,
    },
    {
      path: "/pages/landing-pages/contact-us",
      name: "contactus",
      component: ContactView,
    },
    {
      path: "/pages/landing-pages/author",
      name: "author",
      component: AuthorView,
    },
    {
      path: "/pages/landing-pages/basic",
      name: "signin-basic",
      component: SignInBasicView,
    },
    {
      path: "/sections/page-sections/page-headers",
      name: "page-headers",
      component: PageHeaders,
    },
    {
      path: "/sections/page-sections/features",
      name: "page-features",
      component: PageFeatures,
    },
    {
      path: "/sections/navigation/navbars",
      name: "navigation-navbars",
      component: NavigationNavbars,
    },
    {
      path: "/sections/navigation/nav-tabs",
      name: "navigation-navtabs",
      component: NavigationNavTabs,
    },
    {
      path: "/sections/navigation/pagination",
      name: "navigation-pagination",
      component: NavigationPagination,
    },
    {
      path: "/sections/input-areas/inputs",
      name: "inputareas-inputs",
      component: InputAreasInputs,
    },
    {
      path: "/sections/input-areas/forms",
      name: "inputareas-forms",
      component: InputAreasForms,
    },
    {
      path: "/sections/attention-catchers/alerts",
      name: "ac-alerts",
      component: ACAlerts,
    },
    {
      path: "/sections/attention-catchers/modals",
      name: "ac-modals",
      component: ACModals,
    },
    {
      path: "/sections/attention-catchers/tooltips-popovers",
      name: "ac-tooltips-popovers",
      component: ACTooltipsPopovers,
    },
    {
      path: "/sections/elements/avatars",
      name: "el-avatars",
      component: ElAvatars,
    },
    {
      path: "/sections/elements/badges",
      name: "el-badges",
      component: ElBadges,
    },
    {
      path: "/sections/elements/breadcrumbs",
      name: "el-breadcrumbs",
      component: ElBreadcrumbs,
    },
    {
      path: "/sections/elements/buttons",
      name: "el-buttons",
      component: ElButtons,
    },
    {
      path: "/sections/elements/button-groups",
      name: "el-button-groups",
      component: ElButtonGroups,
    },
    {
      path: "/sections/elements/dropdowns",
      name: "el-dropdowns",
      component: ElDropdowns,
    },
    {
      path: "/sections/elements/progress-bars",
      name: "el-progress-bars",
      component: ElProgressBars,
    },
    {
      path: "/sections/elements/toggles",
      name: "el-toggles",
      component: ElToggles,
    },
    {
      path: "/sections/elements/typography",
      name: "el-typography",
      component: ElTypography,
    },
  
        {
          path: '/admin/auth',
          component: AdminLoginView,
          name: "admin-login",
        },
        {
          path: '/admin/dashboard',
          component: AdminDashboardView,
          name: "admin-dashboard",

          children: [
            {
              path: '/admin/users',
              component: AdminUsersView,
              name: "admin-users",
            },  
            {
              path: '/admin/settings',
              component: AdminSettingsView,
              name: "admin-settings",
            },
            // Other child routes for the dashboard
          ]
      
        },
        // {
        //   path: "/unauthorized",
        //   name: "unauthorized",
        //   component: UnauthorizedView,
        // },
        {
          path: "/user/login",
          name: "user-login",
          component: UserLoginView,
        },

       
      ],
    });


    router.beforeEach((to, from, next) => {
      const store = useStore()
      console.log(store.isAuthenticated,store.user,"store")
      //console.log(store.isAuthenticated,"store")
      if (to.meta.requiresAuth && !store.isAuthenticated) {
        next('/admin/auth')
      } else if (to.meta.requiresVisitor && store.isAuthenticated) {
        next('/sections/elements/progress-bars')
      } else {
        next()
      }
    })
    
    
    
    // function isAuthenticated() {
    //   // Check if the user is authenticated, e.g., by verifying the presence of a valid token or logged-in state
    //   // Return true if authenticated, false otherwise
    //   // Example: return localStorage.getItem('token') !== null;
    
    //   return true;
    // }
    
    // function getCurrentUserRole() {
    //   // Retrieve the current user's role from your authentication system or state management
    //   // Return the role of the current user
    //   // Example: return localStorage.getItem('userRole');
    //   return "guest";
    // }
    
    // // Route guard
    // router.beforeEach((to, from, next) => {
    //   if (to.meta.requiresAuth) {
    //     // Check if the user is authenticated, e.g., by checking the presence of a valid token or logged-in state
    //     if (isAuthenticated()) {
    //       // Check if the user has the required role
    //       if (to.meta.requiredRole && getCurrentUserRole() !== to.meta.requiredRole) {
    //         // Redirect to a different route or show an error message
    //         next({ path: '/unauthorized' });
    //       } else {
    //         // Proceed to the requested route
    //         next();
    //       }
    //     } else {
    //       // Redirect to the login page or a suitable route for unauthenticated users
    //       next({ path: '/logout' });
    //     }
    //   } else {
    //     // No authentication required for the route
    //     next();
    //   }
    // });
    
    export default router;
    